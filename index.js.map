{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGallery = imgInfo => {\n  return `<li class=\"gallery-card\">\n        <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\">\n            <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n            </a>\n             <div class=\"gallery-info\">\n              <p><strong>Likes:</strong> ${imgInfo.likes}</p>\n              <p><strong>Views:</strong> ${imgInfo.views}</p>\n              <p><strong>Comments:</strong> ${imgInfo.comments}</p>\n              <p><strong>Downloads:</strong> ${imgInfo.downloads}</p>\n            </div>\n          </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotoByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '46917062-2aeb1fc3b978e5a238a42f10e',\n      q: searchedQuery,\n      page: currentPage,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n","import { createGallery } from './js/render-functions';\nimport { fetchPhotoByQuery } from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('.js-loadmore-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 50,\n});\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.show({ message: `the field must be filled!` });\n      return;\n    }\n    page = 1;\n    loadMoreBtn.classList.add('is-hidden');\n    loader.style.display = 'flex';\n    const { data } = await fetchPhotoByQuery(searchedQuery, page);\n\n    if (data.total === 0) {\n      iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n      });\n      gallery.innerHTML = '';\n      searchForm.reset();\n      return;\n    }\n    if (data.total > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n    const galleryTemplate = data.hits.map(el => createGallery(el)).join('');\n    gallery.innerHTML = galleryTemplate;\n\n    smoothScroll();\n\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n    iziToast.show({ message: `Something went wrong. Please try again later.` });\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n    const { data } = await fetchPhotoByQuery(searchedQuery, page);\n    const galleryTemplate = data.hits.map(el => createGallery(el)).join('');\n    gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    smoothScroll();\n\n    if (page === data.totalHits) {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nfunction smoothScroll() {\n  const galleryCard = document.querySelector('.gallery-card');\n  if (galleryCard) {\n    const cardHeight = galleryCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["createGallery","imgInfo","fetchPhotoByQuery","searchedQuery","currentPage","axiosOptions","axios","searchForm","gallery","loadMoreBtn","page","lightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","smoothScroll","err","galleryCard","cardHeight"],"mappings":"+vBAAO,MAAMA,EAAgBC,GACpB;AAAA,mBACUA,EAAQ,aAAa;AAAA,4CACIA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,2CAG3CA,EAAQ,KAAK;AAAA,2CACbA,EAAQ,KAAK;AAAA,8CACVA,EAAQ,QAAQ;AAAA,+CACfA,EAAQ,SAAS;AAAA;AAAA,iBCPnDC,EAAoB,CAACC,EAAeC,IAAgB,CAC/D,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,EACE,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC3D,ECLME,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAc,SAAS,cAAc,kBAAkB,EAE7D,IAAIC,EAAO,EACPP,EAAgB,GAEpB,MAAMQ,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,EAChB,CAAC,EAEKC,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAIF,GAHAA,EAAM,eAAc,EACpBX,EAAgBW,EAAM,cAAc,SAAS,WAAW,MAAM,OAE1DX,IAAkB,GAAI,CACxBY,EAAS,KAAK,CAAE,QAAS,2BAA6B,CAAA,EACtD,MACD,CACDL,EAAO,EACPD,EAAY,UAAU,IAAI,WAAW,EACrC,OAAO,MAAM,QAAU,OACvB,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMd,EAAkBC,EAAeO,CAAI,EAE5D,GAAIM,EAAK,QAAU,EAAG,CACpBD,EAAS,KAAK,CACZ,QAAS,0EACjB,CAAO,EACDP,EAAQ,UAAY,GACpBD,EAAW,MAAK,EAChB,MACD,CACGS,EAAK,MAAQ,IACfP,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASQ,CAAkB,GAE1D,MAAMC,EAAkBF,EAAK,KAAK,IAAIG,GAAMnB,EAAcmB,CAAE,CAAC,EAAE,KAAK,EAAE,EACtEX,EAAQ,UAAYU,EAEpBE,IAEAT,EAAS,QAAO,CACjB,OAAQU,EAAK,CACZ,QAAQ,IAAIA,CAAG,EACfN,EAAS,KAAK,CAAE,QAAS,+CAAiD,CAAA,CAC9E,QAAY,CACR,OAAO,MAAM,QAAU,MACxB,CACH,EAEAR,EAAW,iBAAiB,SAAUM,CAAkB,EAExD,MAAMI,EAAqB,MAAMH,GAAS,CACxC,GAAI,CACFJ,IACA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMd,EAAkBC,EAAeO,CAAI,EACtDQ,EAAkBF,EAAK,KAAK,IAAIG,GAAMnB,EAAcmB,CAAE,CAAC,EAAE,KAAK,EAAE,EACtEX,EAAQ,mBAAmB,YAAaU,CAAe,EAEvDE,IAEIV,IAASM,EAAK,YAChBP,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,oBAAoB,QAASQ,CAAkB,EAC3DF,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EAEJ,OAAQM,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEA,SAASD,GAAe,CACtB,MAAME,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}